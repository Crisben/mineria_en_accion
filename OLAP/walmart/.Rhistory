qnorm(0.95)
qnorm(0.95)*75+1100
qnorm(0.95)*75/10+1100
qnorm(0.95)*75/10+1100
qnorm(0.95)*75/10+1100
ppois(10,lambda=5*3)
qnorm(0.95)*75
ppois(10,lambda=5*3)
n = 9; mean =1100; sddev = 30
mean + c(-1,1) * qt(0.025) * sddev / sqrt(n)
?qt
n = 9; mean =1100; sddev = 30
mean + c(-1,1) * qt(0.025,9) * sddev / sqrt(n)
pbinom(q=3,prob=.5,size=4,lower.tail=TRUE)
1-pbinom(q=3,prob=.5,size=4,lower.tail=TRUE)
## Establecemos el directorio de trabajo
setwd("/home/mario/mineria_en_accion/OLAP/bike")
## Cargamos la data disponible
rentals <- read.csv("hour.csv")
str(rentals)
#install.packages("lubridate")
library(lubridate)
rentals$dteday<-ymd(rentals[,"dteday"])
rentals$temp <- rentals$temp*41
rentals$atemp <- rentals$atemp*50
str(rentals)
plot(rentals$dteday,rentals$cnt)
rentals$datetime <- ymd(rentals$dteday)
hour(rentals$datetime) <- rentals$hr
summary(rentals)
plot(rentals$datetime,rentals$cnt)
#install.packages("ggplot2")
library(ggplot2)
qplot(datetime,cnt,data=rentals,geom="line",color=season)
which(is.na(rentals$cnt))
#Cuboide al dia
daily.count <- aggregate(cnt ~ dteday, FUN=sum, data=rentals)
qplot(dteday,cnt,data=daily.count,geom="line")
#Cuboide al mes
aggregate(rentals$cnt, by=list(rentals$mnth), FUN=mean)
monthly.count <- aggregate(cbind(cnt=rentals$cnt), by=list(mnth=rentals$mnth), FUN=mean)
qplot(mnth,cnt,data=monthly.count,geom="line")
monthly.count <- aggregate(cbind(cnt=rentals$cnt), by=list(yr=rentals$yr,mnth=rentals$mnth), FUN=mean)
qplot(mnth,cnt,data=monthly.count,geom="line",color=yr)
monthly.count$year <- as.factor(monthly.count$yr+2011)
qplot(mnth,cnt,data=monthly.count,geom="line",color=year,xlab="Month",ylab="Total Rentals", main="Monthly Bike Rentals")
#Cuboide estacion
aggregate(rentals$cnt, by=list(workingday=rentals$workingday,weekday=rentals$weekday), FUN=length)
daily.count <- aggregate(cnt ~ dteday+season, FUN=sum, data=rentals)
aggregate(daily.count$cnt, by=list(day=weekdays(daily.count$dteday)), FUN=mean)
daily.count[daily.count$season==1,"season"] <- "winter"
daily.count[daily.count$season==2,"season"] <- "spring"
daily.count[daily.count$season==3,"season"] <- "summer"
daily.count[daily.count$season==4,"season"] <- "fall"
daily.count$season <- as.factor(daily.count$season)
boxplot(cnt~season,data=daily.count)
# Cuboide día de la semana
weekday.season.mean <- aggregate(cbind(cnt=daily.count$cnt), by=list(day=wday(daily.count$dteday),season=daily.count$season), FUN=mean)
qplot(day,cnt,geom="line",color=season,data=weekday.season.mean)+geom_hline(aes(yintercept=mean(daily.count$cnt)), colour="blue", linetype = "longdash")
aggregate(cnt~hr+season, FUN=sum, data=rentals)
hour.season.sum <- aggregate(cnt~hr+season, FUN=mean, data=rentals)
hour.season.sum <- aggregate(cbind(cnt=rentals$cnt),by=list(hr=rentals$hr,season=rentals$season), FUN=mean, data=rentals)
hour.season <- aggregate(cbind(cnt=rentals$cnt),by=list(hr=rentals$hr,season=rentals$season), FUN=mean, data=rentals)
View(hour.season)
View(hour.season)
qplot(hr,cnt,data=hour.season,color=season)
qplot(hr,cnt,data=hour.season,color=as.factor(season))
qplot(hr,cnt,data=hour.season,geom="line",color=as.factor(season))
hour.weather <- aggregate(cbind(cnt=rentals$cnt),by=list(hr=rentals$hr,weathersit=rentals$weathersit), FUN=mean, data=rentals)
qplot(hr,cnt,data=hour.season,geom="line",color=as.factor(weathersit))
qplot(hr,cnt,data=hour.weather,geom="line",color=as.factor(weathersit))
?subset
subset(hour.weather, weather==4)
subset(hour.weather, weathersit==4)
qplot(hr,cnt,data=hour.weather,geom="line",color=as.factor(weathersit))
qplot(day,cnt,geom="line",color=season,data=weekday.season.mean)+geom_hline(aes(yintercept=mean(daily.count$cnt)), colour="blue", linetype = "longdash")
qplot(hr,cnt,data=hour.season,geom="line",color=as.factor(season))
qplot(hr,cnt,data=hour.weather,geom="line",color=as.factor(weathersit))
aggregate(cbind(temp=rentals$temp),by=list(hr=rentals$hr,weathersit=rentals$weathersit), FUN=mean, data=rentals)
temp.season <- aggregate(cbind(temp=rentals$temp),by=list(hr=rentals$hr,weathersit=rentals$season), FUN=mean, data=rentals)
temp.weather <- aggregate(cbind(temp=rentals$temp),by=list(hr=rentals$hr,weathersit=rentals$weathersit), FUN=mean, data=rentals)
qplot(hr,temp,data=temp.season,geom="line",color=as.factor(weathersit))
temp.season <- aggregate(cbind(temp=rentals$temp),by=list(hr=rentals$hr,weathersit=rentals$season), FUN=mean, data=rentals)
qplot(hr,temp,data=temp.season,geom="line",color=as.factor(weathersit))
temp.season <- aggregate(cbind(temp=rentals$temp),by=list(hr=rentals$hr,season=rentals$season), FUN=mean, data=rentals)
qplot(hr,temp,data=temp.season,geom="line",color=as.factor(season))
temp.weather <- aggregate(cbind(temp=rentals$temp),by=list(hr=rentals$hr,weathersit=rentals$weathersit), FUN=mean, data=rentals)
qplot(hr,temp,data=temp.weather,geom="line",color=as.factor(weathersit))
?qplot
## Establecemos el directorio de trabajo
setwd("/home/mario/mineria_en_accion/OLAP/walmart")
## Cargamos la data disponible
sales <- read.csv("data.csv")
features <- read.csv("features.csv")
stores <- read.csv("stores.csv")
## Describir la data
summary(sales)
install.packages("lubridate")
library(lubridate)
sales$Date<-ymd(sales[,"Date"])
summary(sales)
max(sales$Date) - min(sales$Date) + 6
str(sales)
head(sales)
tail(sales)
features$Date<-ymd(features[,"Date"])
pairs <- unique(sales[,c("Store","Dept")])
table(pairs$Store)
count.departments <- aggregate(cbind(Departments=pairs$Dept),by=list(Store=pairs$Store),FUN=length)
merge(stores,count.departments)
#roll-up
store.department.sales <- aggregate(Weekly_Sales ~ Store + Dept, FUN=sum, na.rm=TRUE, data=sales)
colnames(store.department.sales)[3] <- "Sales"
boxplot(Sales,Dept,data=store.department.sales)
boxplot(store.department.sales$Sales,store.department.sales$Dept,data=store.department.sales)
boxplot(store.department.sales$Dept,store.department.sales$Sales,data=store.department.sales)
boxplot(store.department.sales$Dept,store.department.sales$Sales)
boxplot(Sales~Dept,data=store.department.sales)
aggregate(store.department.sales$Sales,by=list(store.department.sales$Dept))
aggregate(store.department.sales$Sales,by=list(store.department.sales$Dept),FUN=mean)
dept92 <- subset(store.department.sales, Dept == 92, select = c(Store,Sales))
subset(store.department.sales, Dept == 92, select = c(Store,Sales))
aggregate(Sales ~ Store + Dept,FUN=sum,na.rm=TRUE,data=store.department.sales)
subset(store.department.sales, Dept == 92, select = c(Store,Sales))
dept92 <- subset(store.department.sales, Dept == 92, select = c(Store,Sales))
dept92 <- subset(sales, Dept == 92, select = c(Date,Store,Sales))
dept92 <- subset(sales, Dept == 92, select = c(Date,Store,Weekly_Sales))
plot(Sales~Date,data=dept92)
plot(Weekly_Sales~Date,data=dept92)
qplot(Weekly_Sales~Date,geom="line",color="Store",data=dept92)
qplot(Weekly_Sales,Date,geom="line",color="Store",data=dept92)
qplot(Date,Weekly_Sales,geom="line",color="Store",data=dept92)
qplot(Date,Weekly_Sales,geom="line",color=Store,data=dept92)
qplot(Date,Weekly_Sales,geom="line",color=as.factor(Store),data=dept92)
subset(store.department.sales, Dept == 92, select = c(Store,Sales))
dept92.sales <- subset(store.department.sales, Dept == 92, select = c(Store,Sales))
?order
order(dept92.sales$Sales)
dept92.sales[order(dept92.sales$Sales),]
dept92.sales[order(-dept92.sales$Sales),]
qplot(Date,Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(dept92, Store==14))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(dept92, Store==14))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==14 && Dept==1))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==14 & Dept==1))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==14 & Dept==1))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==2 & Dept==1))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==2 & Dept==14))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==2 & Dept==92))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==3 & Dept==92))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(dept92, Store==14))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==20 & Dept==92))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(dept92, Store==14))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==2 & Dept==92))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==20 & Dept==92))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==14 & Dept==1))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==2 & Dept==1))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==20 & Dept==1))
boxplot(Sales~Dept,data=store.department.sales)
aggregate(store.department.sales$Sales,by=list(store.department.sales$Dept),FUN=mean)
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==14 & Dept==2))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==2 & Dept==2))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==20 & Dept==2))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==14 & Dept==2))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==2 & Dept==2))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==20 & Dept==2))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==2 & Dept==2))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==20 & Dept==2))
qplot(yday(Date),Weekly_Sales,geom="line",color=as.factor(year(Date)),data=subset(sales, Store==14 & Dept==2))
hist(dept1$Sales)
aggregate(Weekly_Sales ~ Store + Dept, FUN=sum, na.rm=TRUE, data=sales)
store.sales <- aggregate(Sales ~ Store + Dept,FUN=sum,na.rm=TRUE,data=store.department.sales)
store.sales <- aggregate(Sales ~ Dept,FUN=sum,na.rm=TRUE,data=sales)
store.sales <- aggregate(Weekly_Sales ~ Dept,FUN=sum,na.rm=TRUE,data=sales)
View(store.sales)
View(store.sales)
subset(store.department.sales, Sales < 1000000 & Dept==1, select = Store)
subset(store.department.sales, Sales < 1000000 & Dept==1)
boxplot(Sales~Dept,data=store.department.sales)
subset(store.department.sales, Dept==1)
#Qué tiendas vendieron menos de un millon de dolares?
subset(store.department.sales, Dept==1)
hist(dept1$Sales)
hist(store.sales$Weekly_Sales)
hist(subset(store.department.sales$Weekly_Sales,Dept==1))
hist(subset(store.department.sales,Dept==1))
hist(subset(store.department.sales,Dept==1)$Weekly_Sales)
subset(store.department.sales,Dept==1)$Weekly_Sales
subset(store.department.sales,Dept==1)
hist(subset(store.department.sales,Dept==1)$Sales)
#Histograma de las ventas
hist(store.sales$Weekly_Sales)
View(store.sales)
View(store.sales)
store.sales <- aggregate(Weekly_Sales ~ Store,FUN=sum,na.rm=TRUE,data=sales)
hist(store.sales$Weekly_Sales)
summary(store.sales)
?ggplot
store.sales <- merge(stores,store.sales)
View(store.sales)
View(store.sales)
str(store.sales)
store.sales <- merge(stores.sales,count.departments)
store.sales <- merge(store.sales,count.departments)
View(store.sales)
View(store.sales)
colnames(store.sales)[4] <- "Sales"
ggplot(Sales, aes(fill=Type),data=store.sales)
colnames(store.sales)[4] <- "Sales"
ggplot(Sales, aes(fill=Type),data=store.sales)
ggplot(Sales,data=store.sales)
ggplot(store.sales$Sales, aes(fill=store.sales$Type))
ggplot(store.sales$Sales, aes(fill=as.factor(store.sales$Type)))
ggplot(store.sales$Sales)
ggplot(store.sales$Sales, aes(fill=as.factor(store.sales$Type)))+ geom_histogram(binwidth=.5, alpha=.5, position="identity")
store.sales
View(hour.weather)
table(pairs$Store)
aggregate(cbind(Temperature=features$Temperature,Fuel_Price=features$Fuel_Price,CPI=features$CPI,Unemployment=features$Unemployment),by=list(Store=features$Store),FUN=mean)
aggregate(cbind(Temperature=features$Temperature,Fuel_Price=features$Fuel_Price,CPI=features$CPI,Unemployment=features$Unemployment),by=list(Store=features$Store),FUN=mean,na.rm=TRUE)
store.features <- aggregate(cbind(Temperature=features$Temperature,Fuel_Price=features$Fuel_Price,CPI=features$CPI,Unemployment=features$Unemployment),by=list(Store=features$Store),FUN=mean,na.rm=TRUE)
store.sales <- merge(store.sales,store.features)
View(store.sales)
View(store.sales)
store.sales
pairs(store.sales[,3:9],col=store.sales$Type)
plotmatrix(store.sales[,3:9],col=store.sales$Type)
